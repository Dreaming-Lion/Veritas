# Veritas

## 🌞 프로젝트 소개
- Veritas는 미디어 리터러시 역량 강화를 위한 정치 뉴스 플랫폼입니다.
- 일반적으로 미디어 리터러시 능력을 강화하는 방법에는 자신의 견해와 반대되는 의견을 가진 저자의 글을 읽거나, 다양한 정치 스펙트럼 뉴스 매체를 참고하여 여러 각도에서 생각해 보는 비판적 사고 능력을 기르는 것이 있으며, 본 서비스는 사용자가 클릭한 기사 뿐만 아니라, 해당 기사와 상반되는 관점의 기사를 함께 제공하며, 법안 발의나 뉴스 브리핑과 같은 주요 정치 정보에 대해서는 제안 이유와 주요 내용이 담긴 원본 자료를 함께 제시하여 사용자가 왜곡되지 않은 정보를 바탕으로 증거 기반의 정치적 판단을 내릴 수 있도록 하고 있습니다.

<br>

### 반대 성향 기사 추천 로직 (ver 1)
- 사용자가 특정 기사를 클릭하면 해당 기사의 본문을 TF-IDF로 벡터화하고, 48시간 이내의 기사들과의 코사인 유사도를 계산해 상위 50개의 유사 기사를 1차 후보로 선정했습니다.
- 이후, 1차 후보 기사에 대해 NLI 모델(mDeBERTa XNLI)을 사용해 클릭 기사와 수집한 기사 간 논리적 관계를 추론하고, NLI가 반환한 확률 기반의 스코어가 특정 임계치 이상인 기사만 최종적으로 추천 목록에 포함하여 내용적으로 관련이 있으면서도 관점 차이가 존재하는 기사만 남겼습니다.
- 또한, 추천 시스템의 품질을 높이고, 다양한 언론사의 기사를 추천 받을 수 있도록 15개 언론사의 RSS를 크롤링했으며, 각 언론사의 정치적 성향(진보/중도/보수)을 스코어링에 반영했습니다. 이를 통해 단순 유사 기사 추천이 아닌 다양한 정치 스펙트럼의 기사를 균형 있게 제공하는 구조를 구현했습니다.
- 해당 프로세스는 복잡한 연산을 기반으로 하기에 사용자가 추천 결과를 응답 받기까지 오랜 시간이 걸린다는 단점이 존재했습니다. 그래서 실제 서비스 환경에서의 성능과 응답 속도를 고려하여, 계산된 추천 결과는 PostgreSQL의 `article_reco` 테이블에 JSONB 형태로 캐싱하고, 최대 6시간 동안 재사용하도록 설계했습니다. 동일한 기사에 대해 동일한 파라미터(시간 창, 추천 개수, stance 임계값)로 요청이 들어올 경우 캐시된 결과를 우선 활용하고, 캐시가 오래된 경우에는 오래된 결과를 먼저 반환한 뒤 백그라운드에서 추천을 재계산해 캐시를 갱신하는 방식으로 API 응답 지연을 최소화했습니다. 또한 별도의 배치 작업을 통해 최근 기사들에 대한 추천 결과를 미리 계산해 두어, 트래픽이 몰리는 상황에서도 안정적으로 추천 기능을 제공할 수 있도록 했습니다.

<br>

### 향후 업데이트 예정 (ver 2)
- 사용자가 클릭한 뉴스 기사의 원본 url을 추출하여 언론사와 매칭하고, 해당 언론사의 정치 성향과 반대되는 언론사의 뉴스 기사를 1차 후보로 선정합니다. (ex. 보수 -> 진보 / 진보 -> 보수 / 중립 -> 진보/보수)
- 클릭한 기사의 본문을 TF-IDF로 벡터화하고 코사인 유사도를 계산해 상위 50개의 유사 기사를 1차 후보로 선정한 뒤, 다시 NLI 모델을 활용해 추론합니다. (방법은 ver1과 유사합니다.)
- 이러한 방식을 통해 사용자가 클릭한 뉴스 기사와 반대되는 성향을 지닌 언론사의 기사를 제공할 수 있도록 합니다.

<br>

## 🐳 Docker 로 실행하기

```bash
# Docker 컨테이너 실행
./start-dev.sh

# log 확인
./logs.sh

# Docker 컨테이너 종료
./stop.sh

# Docker 자원 정리
./clean-docker.sh
```

<br>

## 📝 커밋 메시지 컨벤션

```
feat        : 새로운 기능 추가
fix         : 버그 수정
docs        : 문서 수정
style       : 코드 포맷팅, 세미콜론 누락 등
refactor    : 코드 리팩토링
test        : 테스트 코드 추가/수정
chore       : 빌드 업무 수정, 패키지 매니저 수정 등
```

#### 예시
```
feat(frontend): 로그인 페이지 UI 구현
fix(backend): 사용자 인증 API 버그 수정
docs: README 업데이트
style(frontend): 코드 포맷팅 적용
```